% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/get_ala_sound.R
\name{get_ala_sounds}
\alias{get_ala_sounds}
\title{Download Sound Recordings from Atlas of Living Australia (ALA)}
\usage{
get_ala_sounds(
  taxon_name,
  target_n = 50,
  download = TRUE,
  out_dir = "sounds",
  include_taxon_name = TRUE,
  supplier = c("all", "CSIRO"),
  as_wav = FALSE
)
}
\arguments{
\item{taxon_name}{Character. Scientific or common name of the taxon to search for.}

\item{target_n}{Numeric. Target number of sound files to download. Default is 50.}

\item{download}{Logical. If TRUE, downloads audio files. If FALSE, only returns
the count of available recordings. Default is TRUE.}

\item{out_dir}{Character. Output directory for downloaded files. Will create
subdirectories "audio" and "metadata.csv". Default is "sounds".}

\item{include_taxon_name}{Logical. If TRUE, prepends the taxon name to the filename.
Default is TRUE.}

\item{supplier}{Character. Data supplier to filter for. Options are "all" or "CSIRO".
If "CSIRO", filters for records with institutionCode "ANWC" and
collectionCode "Sounds". A lightweight count check is performed first;
if no CSIRO records exist, the function returns 0 immediately without
downloading the full media metadata. Default is "all".}

\item{as_wav}{Logical. If TRUE, converts downloaded audio files to WAV format.
Default is FALSE.}
}
\value{
Character. The absolute path to the metadata CSV file created/updated.
}
\description{
Queries the ALA for sound recordings of a specified taxon and downloads them.
This function improves upon basic media downloads by handling metadata
and limiting download counts.
}
\details{
When \code{download = TRUE}, the function:
\itemize{
  \item Creates \code{out_dir/audio/} directory for audio files
  \item Creates \code{out_dir/metadata_ala.csv} with record metadata
  \item Downloads files named as \code{[Taxon_Name_]<record_id>.<ext>}
  \item Deduplicates media records by URL before downloading (ALA can return
    multiple rows pointing to the same audio file)
  \item Skips files that already exist in the output directory or have been
    downloaded in the current batch
  \item Uses the ALA \code{recordID} for filenames; when missing, extracts a
    UUID from the audio URL for traceability back to the source record
  \item Falls back to the searched \code{taxon_name} when \code{scientificName}
    is missing from a record
  \item Automatically converts recordings to WAV if \code{as_wav = TRUE}
}
}
\examples{
\dontrun{
galah_config(email = "your-email@example.com")
# Search and download up to 10 sounds as WAV
get_ala_sounds("Teleogryllus commodus", target_n = 10, as_wav = TRUE)
}

}
